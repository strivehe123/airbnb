<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
</head>

<body>
    <script>
        function getRequest(url) {
            return new Promise((resolve, reject) => {
                setTimeout(() => {
                    // console.log(url)
                    resolve(`获取${url}结果`)
                }, 2000)
            })
        }
        // const getPromise = getRequest('www.baidu.com')
        // getPromise.then((res) => console.log(res))
        // 回调地狱
        // function getData(url) {
        //     getRequest(url).then((res) => {
        //         console.log('第一次请求完成')
        //         getRequest(url + res).then((res) => {
        //             console.log(`第二次请求完成`)
        //             getRequest(url + res).then((res) => {
        //                 console.log('第三次请求完成')
        //             })
        //         })
        //     })
        // }
        // 优化1  链式调用
        // function getData(url) {
        //     getRequest(url)
        //         .then((res) => {
        //             console.log('第一次请求完成.')
        //             return getRequest(url + res)
        //         })
        //         .then((res) => {
        //             console.log('第二次请求完成')
        //             return getRequest(url + res)
        //         })
        //         .then((res) => console.log('第三场请完成'))
        // }
        // 优化2 生成器函数
        // function* getData(url) {
        //     const res1 = yield getRequest(url)
        //     console.log(`res1: ${res1}`)
        //     const res2 = yield getRequest(url + res1)
        //     console.log(`res2:${res2}`)
        //     const res3 = yield getRequest(url + res2)
        //     console.log(`res3: ${res3}`)
        // }
        // const generator = getData('www.baiu.com')
        // generator.next().value.then((res1) => generator.next(res1).value.then((res2) => generator.next(res2).value.then((res3) => generator.next(res3))))
        // 最终代码
        async function getData(url) {
            const res1 = await getRequest(url)
            console.log(`res1: ${res1}`)
            const res2 = await getRequest(url)
            console.log(`res2: ${res2}`)
            const res3 = await getRequest(url)
            console.log(`res3: ${res3}`)
        }
        getData('www.baifu.com')
    </script>
</body>

</html>